"use strict";angular.module("adminApp",["ngCookies","ngResource","ngSanitize","ngRoute","ui.tinymce"]).config(function(a,b){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/News",{templateUrl:"views/news.html",controller:"NewsCtrl"}).otherwise({redirectTo:"/"}),b.html5Mode(!1).hashPrefix("!")}),angular.module("adminApp").controller("MainCtrl",function(a,b,c){var d=function(){return!1};d()&&alert("Imagine being redirected to the News page"),a.login=function(){var a=document.getElementById("login-email").value,d=document.getElementById("login-password").value,e=c.login(a,d);e.success===!0?b.path("/News"):document.getElementById("login-errors").innerHTML=e.error},a.signup=function(){var a=document.getElementById("signup-email").value,b=document.getElementById("signup-password").value,d=document.getElementById("signup-confirm").value,e=document.getElementById("signup-name").value,f=document.getElementById("signup-signature").value,g=c.signup(a,b,d,e,f);g.success===!0?alert("Merci de votre enregistrement. Vous recevrez un email lorsque votre candidature sera validée."):document.getElementById("signup-errors").innerHTML=g.error}}),angular.module("adminApp").factory("User",function(){return{login:function(a,b){var c="",d=!0;return-1===a.indexOf("@")&&(d=!1,c="Il ne s'agit pas d'un email valide."),""===b&&(d=!1,c="Le champ mot de passe est vide."),""===a&&(d=!1,c="Le champ email est vide."),{success:d,error:c}},signup:function(a,b,c,d,e){var f="",g=!0;return b!==c&&(g=!1,f="Le mot de passe ne correspond pas à la confirmation."),-1===a.indexOf("@")&&(g=!1,f="L'email n'est pas valide."),(""===a||""===b||""===c||""===d||""===e)&&(g=!1,f="Certains champs n'ont pas été remplis."),{success:g,error:f}}}}),angular.module("adminApp").controller("NewsCtrl",function(a,b){var c=b.getNews(),d=(new Date).getTime()/1e3;a.news=c,a.sendNews=function(){var c=parseInt(document.getElementById("newsId").value),d=document.getElementById("newsTitle").value,e=a.tinyMceContent,f=document.getElementById("newsDate").value,g=document.getElementById("newsMag").checked?1:0;return f=f.split("/"),f=parseInt(new Date(f[1]+"/"+f[0]+"/"+f[2]+"/").getTime()/1e3)+1,d||e||f?(b.save(d,e,f,c,g),void a.addNews()):(alert("Certains champs ne sont pas remplis."),!1)},a.addNews=function(){a.currentNews={date:d},document.getElementById("newsId").value="",document.getElementById("newsTitle").value="",a.sendText="Créer News",a.tinyMceContent=c.content},a.modify=function(c){var d=b.getNews(c);a.currentNews=d,a.sendText="Modifier News",a.tinyMceContent=d.content},a.sendText="Créer News",a.currentNews={date:d},a.tinymceOptions={selector:"textarea",theme:"modern",plugins:["advlist autolink lists link image charmap print preview hr anchor pagebreak","searchreplace wordcount visualblocks visualchars code fullscreen","insertdatetime media nonbreaking table contextmenu directionality","emoticons template paste textcolor"],toolbar1:"undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image | print preview media | forecolor backcolor emoticons",image_advtab:!0}}),angular.module("adminApp").factory("News",function(){var a=[{id:0,author:"Séb",title:"News n°0 avec super long titre",content:'Mon super text, avec du html: <img src="http://www.google.ch/logos/doodles/2014/annette-von-droste-hulshoffs-217th-birthday-5701007384248320.2-hp.jpg" /><a href="http://tooski.ch"></a>',date:1329390694,mag:1},{id:1,author:"Séb",title:"News n°1",content:'Mon super text, avec du html: <img src="http://www.fricktal24.ch/typo3temp/pics/Ski-Aerni_Luca_01_55d138efee.jpg" /><a href="http://tooski.ch"></a>',date:1319390695,mag:1},{id:2,author:"Séb",title:"News n°2",content:'Mon super text, avec du html: <a href="https://tooski.ch"><img src="http://skiweltcup.tv/wp-content/themes/tvsportnews/images/09-aerni002-klein-swiss-ski.jpg" /></a>',date:1329390696,mag:1},{id:3,author:"Séb",title:"News n°0",content:'Mon super text, avec du html: <img src="http://www.google.ch/logos/doodles/2014/annette-von-droste-hulshoffs-217th-birthday-5701007384248320.2-hp.jpg" /><a href="http://tooski.ch"></a>',date:1339390694,mag:1},{id:4,author:"Séb",title:"News n°1",content:'Mon super text, avec du html: <img src="http://www.fricktal24.ch/typo3temp/pics/Ski-Aerni_Luca_01_55d138efee.jpg" /><a href="http://tooski.ch"></a>',date:1349390695,mag:0},{id:5,author:"Séb",title:"News n°2",content:'Mon super text, avec du html: <a href="https://tooski.ch"><img src="http://skiweltcup.tv/wp-content/themes/tvsportnews/images/09-aerni002-klein-swiss-ski.jpg" /></a>',date:1359390696,mag:0},{id:6,author:"Séb",title:"News n°0",content:'Mon super text, avec du html: <img src="http://www.google.ch/logos/doodles/2014/annette-von-droste-hulshoffs-217th-birthday-5701007384248320.2-hp.jpg" /><a href="http://tooski.ch"></a>',date:1369390694,mag:1},{id:7,author:"Séb",title:"News n°1",content:'Mon super text, avec du html: <img src="http://www.fricktal24.ch/typo3temp/pics/Ski-Aerni_Luca_01_55d138efee.jpg" /><a href="http://tooski.ch"></a>',date:1379390695,mag:1},{id:8,author:"Séb",title:"News n°2",content:'Mon super text, avec du html: <a href="https://tooski.ch"><img src="http://skiweltcup.tv/wp-content/themes/tvsportnews/images/09-aerni002-klein-swiss-ski.jpg" /></a>',date:1389390696,mag:0}];return{getNews:function(b){var c;return isNaN(b)?a:(c=a.filter(function(a){return a.id===b}),c[0])},save:function(b,c,d,e,f){var g;if(isNaN(e))a.push({id:a.length,author:"Test",title:b,content:c,date:d,mag:f});else for(g=0;g<a.length;g++)if(a[g].id===e){a[g].content=c,a[g].title=b,a[g].date=d,a[g].mag=f;break}}}});